{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/joaog/OneDrive/Documentos/GitHub/Barbearia-TCC-FrontEnd/barbearia-tcc-frontend/services/feedBackAPI.ts"],"sourcesContent":["import { CreateFeedBackDto, Feedback } from \"../types/Feedback\";\r\nimport { api } from \"./api\";\r\n\r\nexport const createFeedback = (data: CreateFeedBackDto) => {\r\n  return api.post(\"/feedback\", data);\r\n};\r\n\r\nexport const getFeedbacksForBarber = async (barberId: number): Promise<Feedback[]> => {\r\n  const response = await api.get(`/barbers/${barberId}/feedback`);\r\n  return response.data;\r\n};\r\n\r\nexport const getMyFeedbacks = async (): Promise<Feedback[]> => {\r\n  const response = await api.get(\"/feedback/me\"); // Rota protegida\r\n  return response.data;\r\n};\r\n\r\nexport const deleteFeedback = (feedbackId: number) => {\r\n  return api.delete(`/feedback/${feedbackId}`);\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AACA;;AAEO,MAAM,iBAAiB,CAAC;IAC7B,OAAO,yHAAG,CAAC,IAAI,CAAC,aAAa;AAC/B;AAEO,MAAM,wBAAwB,OAAO;IAC1C,MAAM,WAAW,MAAM,yHAAG,CAAC,GAAG,CAAC,AAAC,YAAoB,OAAT,UAAS;IACpD,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,iBAAiB;IAC5B,MAAM,WAAW,MAAM,yHAAG,CAAC,GAAG,CAAC,iBAAiB,iBAAiB;IACjE,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,iBAAiB,CAAC;IAC7B,OAAO,yHAAG,CAAC,MAAM,CAAC,AAAC,aAAuB,OAAX;AACjC","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/joaog/OneDrive/Documentos/GitHub/Barbearia-TCC-FrontEnd/barbearia-tcc-frontend/components/FeedBacks/FeedBackForm/ClientFeedBackList/clientFeedBackList.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { getMyFeedbacks, deleteFeedback } from \"../../../../services/feedBackAPI\";\r\nimport { Feedback } from \"../../../../types/Feedback\";\r\nimport \"./clientFeedBackList.css\"; // Pode reutilizar o CSS\r\n\r\nexport default function ClientFeedbackList() {\r\n  const [myFeedbacks, setMyFeedbacks] = useState<Feedback[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadMyFeedbacks();\r\n  }, []);\r\n\r\n  const loadMyFeedbacks = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await getMyFeedbacks();\r\n      setMyFeedbacks(data);\r\n    } catch (error) {\r\n      console.error(\"Falha ao carregar meus feedbacks\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (feedbackId: number) => {\r\n    if (!window.confirm(\"Tem certeza que deseja excluir esta avaliação?\")) {\r\n      return;\r\n    }\r\n    try {\r\n      await deleteFeedback(feedbackId);\r\n      // Remove o feedback da lista localmente (melhor UX)\r\n      setMyFeedbacks((prev) => prev.filter((fb) => fb.id !== feedbackId));\r\n    } catch (error) {\r\n      alert(\"Falha ao excluir. Tente novamente.\");\r\n    }\r\n  };\r\n\r\n  if (isLoading) return <p>Carregando suas avaliações...</p>;\r\n  if (myFeedbacks.length === 0) return <p>Você ainda não fez nenhuma avaliação.</p>;\r\n\r\n  return (\r\n    <div className=\"feedBack-list-container\">\r\n      <h3>Minhas Avaliações</h3>\r\n      <ul className=\"feedBack-list\">\r\n        {myFeedbacks.map((fb) => (\r\n          <li key={fb.id} className=\"feedBack-card\">\r\n            <div className=\"feedBack-header\">\r\n              {/* Mostra o nome do barbeiro que ele avaliou */}\r\n              <strong>{fb.barber.user.name}</strong>\r\n              <span>{fb.rating} Estrelas</span>\r\n            </div>\r\n            {fb.comment && <p className=\"comment\">{fb.comment}</p>}\r\n\r\n            <div className=\"feedBack-actions\">\r\n              {/* Ações de Editar (chama o Form) e Excluir */}\r\n              <button onClick={() => alert(\"TODO: Editar\")}>Editar</button>\r\n              <button onClick={() => handleDelete(fb.id)} className=\"feedBack-delete-button\">\r\n                Excluir\r\n              </button>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAa,EAAE;IAC7D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;wCAAC;YACR;QACF;uCAAG,EAAE;IAEL,MAAM,kBAAkB;QACtB,IAAI;YACF,aAAa;YACb,MAAM,OAAO,MAAM,IAAA,4IAAc;YACjC,eAAe;QACjB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oCAAoC;QACpD,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,IAAI,CAAC,OAAO,OAAO,CAAC,mDAAmD;YACrE;QACF;QACA,IAAI;YACF,MAAM,IAAA,4IAAc,EAAC;YACrB,oDAAoD;YACpD,eAAe,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,KAAO,GAAG,EAAE,KAAK;QACzD,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,IAAI,WAAW,qBAAO,6LAAC;kBAAE;;;;;;IACzB,IAAI,YAAY,MAAM,KAAK,GAAG,qBAAO,6LAAC;kBAAE;;;;;;IAExC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;0BAAG;;;;;;0BACJ,6LAAC;gBAAG,WAAU;0BACX,YAAY,GAAG,CAAC,CAAC,mBAChB,6LAAC;wBAAe,WAAU;;0CACxB,6LAAC;gCAAI,WAAU;;kDAEb,6LAAC;kDAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI;;;;;;kDAC5B,6LAAC;;4CAAM,GAAG,MAAM;4CAAC;;;;;;;;;;;;;4BAElB,GAAG,OAAO,kBAAI,6LAAC;gCAAE,WAAU;0CAAW,GAAG,OAAO;;;;;;0CAEjD,6LAAC;gCAAI,WAAU;;kDAEb,6LAAC;wCAAO,SAAS,IAAM,MAAM;kDAAiB;;;;;;kDAC9C,6LAAC;wCAAO,SAAS,IAAM,aAAa,GAAG,EAAE;wCAAG,WAAU;kDAAyB;;;;;;;;;;;;;uBAX1E,GAAG,EAAE;;;;;;;;;;;;;;;;AAoBxB;GA7DwB;KAAA","debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/joaog/OneDrive/Documentos/GitHub/Barbearia-TCC-FrontEnd/barbearia-tcc-frontend/components/FeedBacks/FeedBackForm/feedBackForm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport \"./feedBackForm.css\";\r\n\r\nimport { useState } from \"react\";\r\nimport { createFeedback } from \"../../../services/feedBackAPI\";\r\n// import { StarRating } from './StarRating'; // (Recomendado)\r\n\r\ninterface Props {\r\n  barberId: number;\r\n  clientId: number;\r\n  //  onSuccess: () => void; // Função para recarregar a lista após o sucesso\r\n}\r\n\r\nexport default function FeedbackForm({ clientId, barberId }: Props) {\r\n  const [rating, setRating] = useState(5);\r\n  const [comment, setComment] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (rating < 1 || rating > 5) {\r\n      setError(\"Por favor, selecione uma nota.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await createFeedback({ rating, comment, barberId, clientId });\r\n      //  onSuccess(); // Avisa o componente pai que um novo feedback foi criado\r\n      setComment(\"\");\r\n      setRating(5);\r\n      setError(\"\");\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Ocorreu um erro ao enviar o feedBack\");\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"feedback-form\">\r\n      <h4>Deixe sua avaliação</h4>\r\n      {error && <p className=\"error-message\">{error}</p>}\r\n\r\n      <div className=\"form-group\">\r\n        <label>Nota (de 1 a 5)</label>\r\n        {/* Recomendação: Substitua este 'select' por um componente visual de estrelas */}\r\n        <select value={rating} onChange={(e) => setRating(Number(e.target.value))}>\r\n          <option value={5}>5 Estrelas</option>\r\n          <option value={4}>4 Estrelas</option>\r\n          <option value={3}>3 Estrelas</option>\r\n          <option value={2}>2 Estrelas</option>\r\n          <option value={1}>1 Estrela</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Comentário (Opcional)</label>\r\n        <textarea value={comment} onChange={(e) => setComment(e.target.value)} placeholder=\"Como foi sua experiência?\" />\r\n      </div>\r\n      <button type=\"submit\">Enviar Avaliação</button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAIA;AACA;;;AALA;;;;AAce,SAAS,aAAa,KAA6B;QAA7B,EAAE,QAAQ,EAAE,QAAQ,EAAS,GAA7B;;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,SAAS,KAAK,SAAS,GAAG;YAC5B,SAAS;YACT;QACF;QAEA,IAAI;YACF,MAAM,IAAA,4IAAc,EAAC;gBAAE;gBAAQ;gBAAS;gBAAU;YAAS;YAC3D,0EAA0E;YAC1E,WAAW;YACX,UAAU;YACV,SAAS;QACX,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC9C,QAAQ,KAAK,CAAC;QAChB;IACF;IAEA,qBACE,6LAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,6LAAC;0BAAG;;;;;;YACH,uBAAS,6LAAC;gBAAE,WAAU;0BAAiB;;;;;;0BAExC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAM;;;;;;kCAEP,6LAAC;wBAAO,OAAO;wBAAQ,UAAU,CAAC,IAAM,UAAU,OAAO,EAAE,MAAM,CAAC,KAAK;;0CACrE,6LAAC;gCAAO,OAAO;0CAAG;;;;;;0CAClB,6LAAC;gCAAO,OAAO;0CAAG;;;;;;0CAClB,6LAAC;gCAAO,OAAO;0CAAG;;;;;;0CAClB,6LAAC;gCAAO,OAAO;0CAAG;;;;;;0CAClB,6LAAC;gCAAO,OAAO;0CAAG;;;;;;;;;;;;;;;;;;0BAItB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAM;;;;;;kCACP,6LAAC;wBAAS,OAAO;wBAAS,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;wBAAG,aAAY;;;;;;;;;;;;0BAErF,6LAAC;gBAAO,MAAK;0BAAS;;;;;;;;;;;;AAG5B;GAhDwB;KAAA","debugId":null}}]
}