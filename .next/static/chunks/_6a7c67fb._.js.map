{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jo%C3%A3o/Documents/GitHub/TCC-Barbearia/Barbearia-TCC-FrontEnd/components/Auth/FormRegister/register.tsx"],"sourcesContent":["// pages/register.tsx (ou onde quer que seu componente Register esteja)\r\n\r\nimport { FormEvent, useState } from \"react\";\r\nimport { useAuth, RegisterContextResult } from \"../../../contexts/AuthContext\";\r\nimport Link from \"next/link\";\r\nimport \"./register.css\"; // Seus estilos CSS\r\nimport { RegisterCredentials } from \"../../../services/AuthAPI\"; // Ajuste o caminho\r\n\r\nexport default function Register() {\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n\r\n  // ✅ RENOMEADO: `serverError` para erros que vêm do backend\r\n  const [serverError, setServerError] = useState<string | null>(null);\r\n\r\n  // ✅ CORRIGIDO: `isSubmitting` com seu setter\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Estado para erros de validação de cada campo no frontend\r\n  const [validationErrors, setValidationErrors] = useState<{ [key: string]: string }>({});\r\n\r\n  const { register } = useAuth();\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n\r\n    // Limpa o erro do campo atual ao digitar\r\n    setValidationErrors((prevErrors) => {\r\n      const newErrors = { ...prevErrors };\r\n      delete newErrors[name]; // Remove o erro específico do campo\r\n      return newErrors;\r\n    });\r\n\r\n    // Limpa a mensagem de erro do servidor ao digitar em qualquer campo\r\n    setServerError(null);\r\n\r\n    // Atualiza o estado do campo correspondente\r\n    switch (name) {\r\n      case \"name\":\r\n        setName(value);\r\n        break;\r\n      case \"email\":\r\n        setEmail(value);\r\n        break;\r\n      case \"phone\":\r\n        setPhone(value);\r\n        break;\r\n      case \"password\":\r\n        setPassword(value);\r\n        break;\r\n      case \"confirmPassword\":\r\n        setConfirmPassword(value);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const errors: { [key: string]: string } = {};\r\n\r\n    // Validação de campos obrigatórios e formato\r\n    if (!name.trim()) {\r\n      errors.name = \"O nome é obrigatório.\";\r\n    }\r\n    if (!email.trim()) {\r\n      errors.email = \"O e-mail é obrigatório.\";\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(email.trim())) {\r\n      errors.email = \"Formato de e-mail inválido.\";\r\n    }\r\n    if (!phone.trim()) {\r\n      errors.phone = \"O telefone é obrigatório.\";\r\n    } else if (!/^\\d{10,11}$/.test(phone.trim())) {\r\n      // Ajuste a regex se o formato for diferente\r\n      errors.phone = \"O telefone deve ter 10 ou 11 dígitos.\";\r\n    }\r\n    if (!password.trim()) {\r\n      errors.password = \"A senha é obrigatória.\";\r\n    } else if (password.trim().length < 8) {\r\n      // Mínimo de 8 caracteres, por exemplo\r\n      errors.password = \"A senha deve ter no mínimo 8 caracteres.\";\r\n    }\r\n    if (!confirmPassword.trim()) {\r\n      errors.confirmPassword = \"A confirmação de senha é obrigatória.\";\r\n    } else if (password !== confirmPassword) {\r\n      // Senhas devem coincidir\r\n      errors.confirmPassword = \"As senhas não coincidem.\";\r\n    }\r\n\r\n    setValidationErrors(errors); // Atualiza o estado de erros de validação\r\n    return Object.keys(errors).length === 0; // Retorna true se não houver erros\r\n  };\r\n\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault(); // Previne o comportamento padrão do formulário\r\n\r\n    setIsSubmitting(true); // Ativa o estado de submissão\r\n    setServerError(null); // Limpa erros anteriores do servidor\r\n    setValidationErrors({}); // Limpa erros de validação anteriores\r\n\r\n    // 1. Executa a validação do formulário no frontend\r\n    const isValid = validateForm();\r\n    if (!isValid) {\r\n      setIsSubmitting(false); // Desativa o estado de submissão se houver erros de validação\r\n      return; // Para aqui se houver erros de validação\r\n    }\r\n\r\n    try {\r\n      const credentials: RegisterCredentials = {\r\n        name: name.trim(),\r\n        email: email.trim(),\r\n        phone: phone.trim(),\r\n        password: password.trim(),\r\n        // Não inclua confirmPassword aqui, pois não é enviado ao backend\r\n      };\r\n\r\n      // 2. Chama a função `register` do contexto\r\n      const result: RegisterContextResult = await register(credentials);\r\n\r\n      if (!result.success) {\r\n        // Se a função `register` do contexto indicou um erro do servidor\r\n        if (result.message.includes(\"Email já cadastrado\")) {\r\n          setServerError(\"E-mail já cadastrado. Por favor, use outro e-mail.\");\r\n        } else {\r\n          setServerError(result.message); // Exibe a mensagem de erro genérica do servidor\r\n        }\r\n      }\r\n      // Se `result.success` for `true`, o redirecionamento já ocorreu dentro do contexto.\r\n      // Não há `else` aqui para o caso de sucesso.\r\n    } catch (err: unknown) {\r\n      // Este catch é para erros muito inesperados (ex: JS error antes da chamada)\r\n      console.error(\"Erro final no handleSubmit do RegisterPage:\", err);\r\n      let errorMessage = \"Ocorreu um erro inesperado. Tente novamente mais tarde.\";\r\n      if (err instanceof Error) {\r\n        errorMessage = err.message;\r\n      } else if (typeof err === \"string\") {\r\n        errorMessage = err;\r\n      }\r\n      setServerError(errorMessage);\r\n    } finally {\r\n      setIsSubmitting(false); // ✅ Desativa o estado de submissão no final, independente do resultado\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"register-box\">\r\n      <div className=\"container-register\">\r\n        <h1 className=\"register-title\">Cadastrar</h1>\r\n        {/* ✅ O FORMULÁRIO DEVE TER O onSubmit */}\r\n        <form className=\"form-register\" onSubmit={handleSubmit}>\r\n          {/* Campo Nome */}\r\n          <div className=\"register-style\">\r\n            <label htmlFor=\"name\">Nome Completo</label>\r\n            <input\r\n              id=\"name\"\r\n              type=\"text\"\r\n              name=\"name\" // ✅ Adicionar o atributo name para handleChange funcionar\r\n              value={name}\r\n              onChange={handleChange}\r\n              className={validationErrors.name ? \"input-error\" : \"\"} // Adiciona classe para estilizar\r\n            />\r\n            {/* ✅ Exibir o erro correto para o campo 'name' */}\r\n            {validationErrors.name && (\r\n              <p style={{ color: \"red\" }} className=\"validation-error-message\">\r\n                {validationErrors.name}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Campo Celular */}\r\n          <div className=\"register-style\">\r\n            <label htmlFor=\"phone\">Celular (apenas numeros, sem espaços)</label>\r\n            <input\r\n              id=\"phone\"\r\n              type=\"number\" // Considere 'tel' para números de telefone, 'number' pode ser problemático com ddd e formatação\r\n              name=\"phone\" // ✅ Adicionar o atributo name\r\n              value={phone}\r\n              onChange={handleChange}\r\n              className={validationErrors.phone ? \"input-error\" : \"\"}\r\n            />\r\n            {/* ✅ Exibir o erro correto para o campo 'phone' */}\r\n            {validationErrors.phone && (\r\n              <p style={{ color: \"red\" }} className=\"validation-error-message\">\r\n                {validationErrors.phone}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Campo Email */}\r\n          <div className=\"register-style\">\r\n            <label htmlFor=\"email\">Email</label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              name=\"email\" // ✅ Adicionar o atributo name\r\n              value={email}\r\n              onChange={handleChange}\r\n              className={validationErrors.email ? \"input-error\" : \"\"}\r\n            />\r\n            {/* ✅ Exibir o erro correto para o campo 'email' */}\r\n            {validationErrors.email && (\r\n              <p style={{ color: \"red\" }} className=\"validation-error-message\">\r\n                {validationErrors.email}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Campo Senha */}\r\n          <div className=\"register-style\">\r\n            <label htmlFor=\"password\">Senha</label>\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              name=\"password\" // ✅ Adicionar o atributo name\r\n              value={password}\r\n              onChange={handleChange}\r\n              className={validationErrors.password ? \"input-error\" : \"\"}\r\n            />\r\n            {/* ✅ Exibir o erro correto para o campo 'password' */}\r\n            {validationErrors.password && (\r\n              <p style={{ color: \"red\" }} className=\"validation-error-message\">\r\n                {validationErrors.password}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Campo Confirme a senha */}\r\n          <div className=\"register-style\">\r\n            <label htmlFor=\"confirmPassword\">Confirme a senha</label> {/* ✅ Corrigido id para 'confirmPassword' */}\r\n            <input\r\n              id=\"confirmPassword\" // ✅ Corrigido id\r\n              type=\"password\"\r\n              name=\"confirmPassword\" // ✅ Adicionar o atributo name\r\n              value={confirmPassword}\r\n              onChange={handleChange}\r\n              className={validationErrors.confirmPassword ? \"input-error\" : \"\"}\r\n            />\r\n            {/* ✅ Exibir o erro correto para o campo 'confirmPassword' */}\r\n            {validationErrors.confirmPassword && (\r\n              <p style={{ color: \"red\" }} className=\"validation-error-message\">\r\n                {validationErrors.confirmPassword}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Botão de Cadastro (DENTRO do formulário) */}\r\n\r\n          {/* Área para exibir mensagens de erro do SERVIDOR */}\r\n          {serverError && (\r\n            <p className=\"server-error-message\" style={{ color: \"red\", marginTop: \"1rem\" }}>\r\n              {serverError}\r\n            </p>\r\n          )}\r\n        </form>\r\n\r\n        <p className=\"sem-conta\" style={{ marginTop: \"1rem\", textAlign: \"center\" }}>\r\n          Já tem uma conta?{\" \"}\r\n          <Link className=\"link-cadastrar\" href=\"/login\">\r\n            Faça login\r\n          </Link>\r\n        </p>\r\n      </div>\r\n      <button\r\n        className=\"submit-button-register\"\r\n        type=\"submit\"\r\n        disabled={isSubmitting}\r\n        style={{ width: \"100%\", padding: \"10px\" }}\r\n        onClick={handleSubmit}\r\n      >\r\n        {isSubmitting ? \"Criando conta...\" : \"Cadastrar\"}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;AAEvE;AACA;AACA;;;;;;;AAIe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,2DAA2D;IAC3D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAgB;IAE9D,6CAA6C;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,2DAA2D;IAC3D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAA4B,CAAC;IAErF,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,sIAAO;IAE5B,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAEhC,yCAAyC;QACzC,oBAAoB,CAAC;YACnB,MAAM,YAAY;gBAAE,GAAG,UAAU;YAAC;YAClC,OAAO,SAAS,CAAC,KAAK,EAAE,oCAAoC;YAC5D,OAAO;QACT;QAEA,oEAAoE;QACpE,eAAe;QAEf,4CAA4C;QAC5C,OAAQ;YACN,KAAK;gBACH,QAAQ;gBACR;YACF,KAAK;gBACH,SAAS;gBACT;YACF,KAAK;gBACH,SAAS;gBACT;YACF,KAAK;gBACH,YAAY;gBACZ;YACF,KAAK;gBACH,mBAAmB;gBACnB;YACF;gBACE;QACJ;IACF;IAEA,MAAM,eAAe;QACnB,MAAM,SAAoC,CAAC;QAE3C,6CAA6C;QAC7C,IAAI,CAAC,KAAK,IAAI,IAAI;YAChB,OAAO,IAAI,GAAG;QAChB;QACA,IAAI,CAAC,MAAM,IAAI,IAAI;YACjB,OAAO,KAAK,GAAG;QACjB,OAAO,IAAI,CAAC,eAAe,IAAI,CAAC,MAAM,IAAI,KAAK;YAC7C,OAAO,KAAK,GAAG;QACjB;QACA,IAAI,CAAC,MAAM,IAAI,IAAI;YACjB,OAAO,KAAK,GAAG;QACjB,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,MAAM,IAAI,KAAK;YAC5C,4CAA4C;YAC5C,OAAO,KAAK,GAAG;QACjB;QACA,IAAI,CAAC,SAAS,IAAI,IAAI;YACpB,OAAO,QAAQ,GAAG;QACpB,OAAO,IAAI,SAAS,IAAI,GAAG,MAAM,GAAG,GAAG;YACrC,sCAAsC;YACtC,OAAO,QAAQ,GAAG;QACpB;QACA,IAAI,CAAC,gBAAgB,IAAI,IAAI;YAC3B,OAAO,eAAe,GAAG;QAC3B,OAAO,IAAI,aAAa,iBAAiB;YACvC,yBAAyB;YACzB,OAAO,eAAe,GAAG;QAC3B;QAEA,oBAAoB,SAAS,0CAA0C;QACvE,OAAO,OAAO,IAAI,CAAC,QAAQ,MAAM,KAAK,GAAG,mCAAmC;IAC9E;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc,IAAI,+CAA+C;QAEnE,gBAAgB,OAAO,8BAA8B;QACrD,eAAe,OAAO,qCAAqC;QAC3D,oBAAoB,CAAC,IAAI,sCAAsC;QAE/D,mDAAmD;QACnD,MAAM,UAAU;QAChB,IAAI,CAAC,SAAS;YACZ,gBAAgB,QAAQ,8DAA8D;YACtF,QAAQ,yCAAyC;QACnD;QAEA,IAAI;YACF,MAAM,cAAmC;gBACvC,MAAM,KAAK,IAAI;gBACf,OAAO,MAAM,IAAI;gBACjB,OAAO,MAAM,IAAI;gBACjB,UAAU,SAAS,IAAI;YAEzB;YAEA,2CAA2C;YAC3C,MAAM,SAAgC,MAAM,SAAS;YAErD,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,iEAAiE;gBACjE,IAAI,OAAO,OAAO,CAAC,QAAQ,CAAC,wBAAwB;oBAClD,eAAe;gBACjB,OAAO;oBACL,eAAe,OAAO,OAAO,GAAG,gDAAgD;gBAClF;YACF;QACA,oFAAoF;QACpF,6CAA6C;QAC/C,EAAE,OAAO,KAAc;YACrB,4EAA4E;YAC5E,QAAQ,KAAK,CAAC,+CAA+C;YAC7D,IAAI,eAAe;YACnB,IAAI,eAAe,OAAO;gBACxB,eAAe,IAAI,OAAO;YAC5B,OAAO,IAAI,OAAO,QAAQ,UAAU;gBAClC,eAAe;YACjB;YACA,eAAe;QACjB,SAAU;YACR,gBAAgB,QAAQ,uEAAuE;QACjG;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAiB;;;;;;kCAE/B,6LAAC;wBAAK,WAAU;wBAAgB,UAAU;;0CAExC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAM,SAAQ;kDAAO;;;;;;kDACtB,6LAAC;wCACC,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,OAAO;wCACP,UAAU;wCACV,WAAW,iBAAiB,IAAI,GAAG,gBAAgB;;;;;;oCAGpD,iBAAiB,IAAI,kBACpB,6LAAC;wCAAE,OAAO;4CAAE,OAAO;wCAAM;wCAAG,WAAU;kDACnC,iBAAiB,IAAI;;;;;;;;;;;;0CAM5B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAM,SAAQ;kDAAQ;;;;;;kDACvB,6LAAC;wCACC,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,OAAO;wCACP,UAAU;wCACV,WAAW,iBAAiB,KAAK,GAAG,gBAAgB;;;;;;oCAGrD,iBAAiB,KAAK,kBACrB,6LAAC;wCAAE,OAAO;4CAAE,OAAO;wCAAM;wCAAG,WAAU;kDACnC,iBAAiB,KAAK;;;;;;;;;;;;0CAM7B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAM,SAAQ;kDAAQ;;;;;;kDACvB,6LAAC;wCACC,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,OAAO;wCACP,UAAU;wCACV,WAAW,iBAAiB,KAAK,GAAG,gBAAgB;;;;;;oCAGrD,iBAAiB,KAAK,kBACrB,6LAAC;wCAAE,OAAO;4CAAE,OAAO;wCAAM;wCAAG,WAAU;kDACnC,iBAAiB,KAAK;;;;;;;;;;;;0CAM7B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAM,SAAQ;kDAAW;;;;;;kDAC1B,6LAAC;wCACC,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,OAAO;wCACP,UAAU;wCACV,WAAW,iBAAiB,QAAQ,GAAG,gBAAgB;;;;;;oCAGxD,iBAAiB,QAAQ,kBACxB,6LAAC;wCAAE,OAAO;4CAAE,OAAO;wCAAM;wCAAG,WAAU;kDACnC,iBAAiB,QAAQ;;;;;;;;;;;;0CAMhC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAM,SAAQ;kDAAkB;;;;;;oCAAwB;kDACzD,6LAAC;wCACC,IAAG;wCACH,MAAK;wCACL,MAAK;wCACL,OAAO;wCACP,UAAU;wCACV,WAAW,iBAAiB,eAAe,GAAG,gBAAgB;;;;;;oCAG/D,iBAAiB,eAAe,kBAC/B,6LAAC;wCAAE,OAAO;4CAAE,OAAO;wCAAM;wCAAG,WAAU;kDACnC,iBAAiB,eAAe;;;;;;;;;;;;4BAQtC,6BACC,6LAAC;gCAAE,WAAU;gCAAuB,OAAO;oCAAE,OAAO;oCAAO,WAAW;gCAAO;0CAC1E;;;;;;;;;;;;kCAKP,6LAAC;wBAAE,WAAU;wBAAY,OAAO;4BAAE,WAAW;4BAAQ,WAAW;wBAAS;;4BAAG;4BACxD;0CAClB,6LAAC,0KAAI;gCAAC,WAAU;gCAAiB,MAAK;0CAAS;;;;;;;;;;;;;;;;;;0BAKnD,6LAAC;gBACC,WAAU;gBACV,MAAK;gBACL,UAAU;gBACV,OAAO;oBAAE,OAAO;oBAAQ,SAAS;gBAAO;gBACxC,SAAS;0BAER,eAAe,qBAAqB;;;;;;;;;;;;AAI7C;GA5QwB;;QAgBD,sIAAO;;;KAhBN","debugId":null}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jo%C3%A3o/Documents/GitHub/TCC-Barbearia/Barbearia-TCC-FrontEnd/src/app/%28auth%29/register/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, FormEvent } from \"react\";\r\n// import { useAuth } from '@/contexts/AuthContext'; // Descomente quando tiver a função register\r\nimport Link from \"next/link\";\r\nimport Register from \"../../../../components/Auth/FormRegister/register\";\r\n\r\nexport default function RegisterPage() {\r\n  return (\r\n    <div style={{ maxWidth: \"400px\", margin: \"auto\", paddingTop: \"50px\", paddingBottom: \"50px\" }}>\r\n      <Register />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAKA;AALA;;;AAOe,SAAS;IACtB,qBACE,6LAAC;QAAI,OAAO;YAAE,UAAU;YAAS,QAAQ;YAAQ,YAAY;YAAQ,eAAe;QAAO;kBACzF,cAAA,6LAAC,6JAAQ;;;;;;;;;;AAGf;KANwB","debugId":null}}]
}